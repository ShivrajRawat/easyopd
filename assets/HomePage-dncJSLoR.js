import{d as I,F as q,l as U,e as K,G as j,H as G,J as Q,K as x,_ as V,z as t,o as a,a as b,b as g,C as o,B as e,t as m,D as u,L,M as N,N as X,u as nn,A as h,O as E,r as w,Q as on,R as en,S as tn,T as ln,U as sn,V as an,W as cn,X as P,Y as rn,Z as un,$ as R,a0 as D,a1 as B,c as F,a2 as dn,a3 as _n,a4 as pn,a5 as mn,a6 as fn,a7 as hn,a8 as Cn,a9 as bn,aa as yn,ab as A,ac as $n,ad as gn,ae as vn,f as Sn,I as In}from"./index-dVSyX9KV.js";import{S as kn,u as Y}from"./Searchbar-r6LsCbg0.js";import{C as Tn}from"./ChipFilterComponent-tso-YgG7.js";const Ln=I({name:"CityCard",components:{IonThumbnail:q,IonIcon:U,IonButton:K,IonLabel:j},props:{city:Object,showActions:Boolean},setup(n,l){return{icons:{locationOutline:G,businessOutline:Q},defaultCityThumbnail:x,actionExplore:r=>{console.log("actionExplore",r)}}}}),Vn={class:"city-card"},On={class:"city-detail"},wn={class:"title"},An={key:0,class:"hospital-count"},Dn={key:0,class:"city-actions"};function Fn(n,l,s,r,d,_){const c=t("ion-label"),i=t("ion-icon"),p=t("ion-note"),v=t("ion-button");return a(),b("div",Vn,[g("div",On,[g("div",wn,[o(c,{class:""},{default:e(()=>[u(m(n.city.name),1)]),_:1})]),n.city.hospitals.length>0?(a(),b("div",An,[o(i,{icon:n.icons.businessOutline},null,8,["icon"]),o(p,{class:"margin10"},{default:e(()=>[u(m(n.city.hospitals.length)+" Hospitals ",1)]),_:1})])):L("",!0)]),n.showActions?(a(),b("div",Dn,[o(v,{fill:"outline",shape:"round",size:"small",onClick:l[0]||(l[0]=$=>n.actionExplore(n.city.name))},{default:e(()=>[u("Explore > ")]),_:1})])):L("",!0)])}const Bn=V(Ln,[["render",Fn],["__scopeId","data-v-184f09da"]]),Nn=I({components:{IonLabel:j,IonItem:N,IonNote:X},props:{hospital:Object},setup(n){const l=nn();return{icons:{businessOutline:Q,locationOutline:G},showDetail:async()=>{console.log("navigate to hospital",n.hospital.route),l.push(n.hospital.route)}}}}),En={class:"ion-no-margin ion-no-padding ion-margin-top ion-margin-bottom"};function Hn(n,l,s,r,d,_){const c=t("ion-label"),i=t("ion-note"),p=t("ion-item");return a(),h(p,{lines:"full",class:"hospital",button:!0,onClick:n.showDetail},{default:e(()=>[g("div",En,[o(c,null,{default:e(()=>[u(m(n.hospital.name),1)]),_:1}),o(c,null,{default:e(()=>[o(i,null,{default:e(()=>[u(m(n.hospital.address),1)]),_:1})]),_:1})])]),_:1},8,["onClick"])}const Mn=V(Nn,[["render",Hn],["__scopeId","data-v-032df1d7"]]),W="ionChange",z={class:"locate-button",iconSlot:"icon-only",icon:tn},zn=I({name:"LocateButton",components:{IonIcon:U,IonButton:K},inheritAttrs:!1,emits:[W],props:{label:String,size:String,fill:String,expand:String,shape:String,iconSlot:String,icon:String},setup(n,l){const s=E(),r=w(Object.assign({},z,n,l.attrs));return on(()=>{r.value=Object.assign({},z,n,l.attrs)}),en(()=>{s.currentLocation.value&&l.emit(W,s.currentLocation.value)}),{retrieveLocation:()=>{s.startGeoLocationRetrieval()},defaultButtonAttributes:z,attrs:r}}});function Un(n,l,s,r,d,_){const c=t("ion-icon"),i=t("ion-button");return a(),h(i,ln(n.attrs,{onClick:n.retrieveLocation,title:"Use current location"}),{default:e(()=>[u(m(n.label)+" ",1),o(c,{slot:n.iconSlot||n.defaultButtonAttributes.iconSlot,icon:n.icon||n.defaultButtonAttributes.icon},null,8,["slot","icon"])]),_:1},16,["onClick"])}const jn=V(zn,[["render",Un]]),J="update:modelValue",Gn=I({name:"LocationSearchbar",components:{LocateButton:jn,Searchbar:kn},props:{modelValue:String,placeholder:String},emits:[J],setup(n,l){const s=w(n.modelValue||""),r=({city:d})=>{s.value=d};return sn(()=>s.value,d=>l.emit(J,d)),{searchText:s,locationChange:r}}}),Pn={class:"location-searchbar"};function Rn(n,l,s,r,d,_){const c=t("Searchbar"),i=t("LocateButton");return a(),b("div",Pn,[o(c,{placeholder:n.placeholder||"Search location",modelValue:n.searchText,"onUpdate:modelValue":l[0]||(l[0]=p=>n.searchText=p)},null,8,["placeholder","modelValue"]),o(i,{class:"location-button",size:"small",fill:"clear",iconSlot:"icon-only",onIonChange:n.locationChange},null,8,["onIonChange"])])}const Z=V(Gn,[["render",Rn]]),Wn=I({name:"CityLlist",components:{IonAccordion:an,IonAccordionGroup:cn,CityCardComponent:Bn,IonItem:N,IonList:P,HospitalListItem:Mn,IonSpinner:rn,IonSkeletonText:un,LocationSearchbar:Z},setup(){const n=E(),l=w(""),s=Y(n.cities,["name"],l,(_,c)=>_==c).filteredItems;R(()=>{n.fetchCities()});const r=({city:_})=>{l.value=_};async function d(_){_.detail.value&&n.fetchHospitals(_.detail.value)}return{filteredCities:s,searchText:l,locationChange:r,cityAccordionInteracted:d}}}),Jn={class:"city-list-container ion-padding"},Kn={key:0},Qn={class:"bold"},Xn={key:1,class:"ion-text-center"},Yn={slot:"content"},Zn={style:{width:"100%"}},qn={class:"ion-text-center"};function xn(n,l,s,r,d,_){const c=t("LocationSearchbar"),i=t("ion-note"),p=t("ion-spinner"),v=t("CityCardComponent"),$=t("ion-item"),S=t("ion-list-header"),k=t("HospitalListItem"),O=t("ion-list"),T=t("ion-skeleton-text"),C=t("ion-label"),H=t("ion-accordion"),M=t("ion-accordion-group");return a(),b("div",Jn,[o(c,{placeholder:"Search city",modelValue:n.searchText,"onUpdate:modelValue":l[0]||(l[0]=f=>n.searchText=f)},null,8,["modelValue"]),n.searchText&&n.filteredCities.length==0?(a(),b("div",Kn,[o(i,null,{default:e(()=>[u(" No result found for "),g("span",Qn,m(n.searchText),1)]),_:1})])):n.filteredCities.length==0?(a(),b("div",Xn,[o(p,{name:"dots"})])):(a(),h(M,{key:2,onIonChange:l[1]||(l[1]=f=>n.cityAccordionInteracted(f))},{default:e(()=>[(a(!0),b(D,null,B(n.filteredCities,f=>(a(),h(H,{value:f.name,key:f.name},{default:e(()=>[o($,{slot:"header"},{default:e(()=>[o(v,{city:f,showActions:!1},null,8,["city"])]),_:2},1024),g("div",Yn,[f.loading?L("",!0):(a(),h(O,{key:0,lines:"full"},{default:e(()=>[f.hospitals.length==0?(a(),h(S,{key:0},{default:e(()=>[u(" No hospitals found in "+m(f.name),1)]),_:2},1024)):L("",!0),(a(!0),b(D,null,B(f.hospitals,y=>(a(),h(k,{key:y.id,hospital:y},null,8,["hospital"]))),128))]),_:2},1024)),f.loading?(a(),h(O,{key:1,lines:"full"},{default:e(()=>[o($,null,{default:e(()=>[g("div",Zn,[o(T,{animated:!0,style:{width:"50%"}}),o(C,null,{default:e(()=>[o(T,{animated:!0,style:{width:"80%"}})]),_:1})])]),_:1}),g("div",qn,[o(p,{name:"bubbles"})])]),_:1})):L("",!0)])]),_:2},1032,["value"]))),128))]),_:1}))])}const no=V(Wn,[["render",xn]]),oo=I({name:"AppointmentList",components:{IonList:P,IonItem:N,IonNote:X,ChipFilterComponent:Tn},setup(n){const l=[{text:"All",value:"999"},{text:"Today",value:"1"},{text:"Next 2 day",value:"2"},{text:"Next 5 day",value:"5"},{text:"Next 7 day",value:"7"}],s=w("7"),r=E(),d=F(()=>{var i;return(i=l.find(p=>p.value==s.value))==null?void 0:i.text}),_=F(()=>Number(s.value));R(()=>{r.fetchAppointments(_.value)});const c=F(()=>{const i=dn(Date.now(),_.value);return r.appointments.filter(p=>p.dateValue<i)});return{icons:{location:_n,timeOutline:pn},dayFilter:s,store:r,getValueFn:mn,appointments:c,toWeekDayFullDate:fn,toSlotTimeDisplayText:hn,filterOptions:l,selectedFilterText:d}}});function eo(n,l,s,r,d,_){const c=t("ion-label"),i=t("ion-list-header"),p=t("ChipFilterComponent"),v=t("ion-item"),$=t("ion-note"),S=t("ion-col"),k=t("ion-row"),O=t("ion-grid"),T=t("ion-list");return a(),h(T,{lines:"full"},{default:e(()=>[o(i,{class:"appointment-header",color:"light"},{default:e(()=>[o(c,null,{default:e(()=>[u("Upcoming appointments")]),_:1})]),_:1}),o(v,{lines:"none"},{default:e(()=>[o(p,{modelValue:n.dayFilter,"onUpdate:modelValue":l[0]||(l[0]=C=>n.dayFilter=C),options:n.filterOptions},null,8,["modelValue","options"])]),_:1}),n.appointments.length==0?(a(),h(v,{key:0},{default:e(()=>[g("div",null,[o($,null,{default:e(()=>[u("Appointments not found for "+m(n.selectedFilterText),1)]),_:1})])]),_:1})):L("",!0),(a(!0),b(D,null,B(n.appointments,C=>(a(),h(v,{key:C.id},{default:e(()=>[o(O,{class:"appointment"},{default:e(()=>[o(k,null,{default:e(()=>[o(S,{size:"9"},{default:e(()=>[g("strong",null,m(n.getValueFn(C.patient,"name")),1)]),_:2},1024),o(S,{size:"3",class:""},{default:e(()=>[o($,null,{default:e(()=>[u(" Status ")]),_:1})]),_:1})]),_:2},1024),o(k,null,{default:e(()=>[o(S,{size:"9"},{default:e(()=>[u(m(n.getValueFn(C.doctor,"name")),1)]),_:2},1024),o(S,{size:"3"},{default:e(()=>[o($,null,{default:e(()=>[u(" Booked ")]),_:1})]),_:1})]),_:2},1024),o(k,null,{default:e(()=>[o(S,null,{default:e(()=>[o($,null,{default:e(()=>[u(m(n.toWeekDayFullDate(C.date))+" | "+m(n.toSlotTimeDisplayText(C.time)),1)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})}const to=V(oo,[["render",eo]]),lo=I({name:"CitySelector",components:{IonItem:N,IonList:P,LocationSearchbar:Z,IonLabel:j,IonIcon:U,IonModal:Cn},setup(){const n=E(),l=w(""),s=w(!1),r=Y(n.cities,["name"],l,(i,p)=>i==p).filteredItems,d=F(()=>n.selectedCity||"Select city"),_=i=>{n.selectCity(i),c(!1)},c=i=>s.value=i;return R(()=>{n.fetchCities()}),{icons:{locationOutline:G,chevronDownOutline:bn,closeOutline:yn},filteredCities:r,searchText:l,selectCityHandler:_,selectedCity:d,isModalOpened:s,showModal:c}}});function so(n,l,s,r,d,_){const c=t("ion-icon"),i=t("ion-button"),p=t("ion-title"),v=t("ion-buttons"),$=t("ion-toolbar"),S=t("ion-header"),k=t("LocationSearchbar"),O=t("ion-list-header"),T=t("ion-label"),C=t("ion-item"),H=t("ion-list"),M=t("ion-content"),f=t("ion-modal");return a(),b(D,null,[o(i,{fill:"clear",shape:"round",size:"small",onClick:l[0]||(l[0]=y=>n.showModal(!0))},{default:e(()=>[o(c,{icon:n.icons.locationOutline,slot:"start"},null,8,["icon"]),u(" "+m(n.selectedCity)+" ",1),o(c,{icon:n.icons.chevronDownOutline,slot:"end"},null,8,["icon"])]),_:1}),o(f,{"is-open":n.isModalOpened},{default:e(()=>[o(S,null,{default:e(()=>[o($,null,{default:e(()=>[o(p,{class:"ion-text-center"},{default:e(()=>[u("Select city")]),_:1}),o(v,{slot:"end"},{default:e(()=>[o(i,{onClick:l[1]||(l[1]=y=>n.showModal(!1))},{default:e(()=>[o(c,{icon:n.icons.closeOutline,slot:"icon-only"},null,8,["icon"])]),_:1})]),_:1})]),_:1})]),_:1}),o(M,{class:"city-list-container ion-padding"},{default:e(()=>[o(k,{placeholder:"Search city",modelValue:n.searchText,"onUpdate:modelValue":l[2]||(l[2]=y=>n.searchText=y)},null,8,["modelValue"]),o(H,{lines:"full"},{default:e(()=>[n.filteredCities.length==0?(a(),h(O,{key:0},{default:e(()=>[u(" No city found for Â "),g("b",null,m(n.searchText),1)]),_:1})):L("",!0),o(C,null,{default:e(()=>[o(T,{color:"primary"},{default:e(()=>[u(" Current: "+m(n.selectedCity),1)]),_:1})]),_:1}),(a(!0),b(D,null,B(n.filteredCities,y=>(a(),h(C,{value:y.name,key:y.name,button:!0,onClick:io=>n.selectCityHandler(y.name)},{default:e(()=>[o(c,{icon:n.icons.locationOutline,slot:"start"},null,8,["icon"]),o(T,null,{default:e(()=>[u(m(y.name),1)]),_:2},1024)]),_:2},1032,["value","onClick"]))),128))]),_:1})]),_:1})]),_:1},8,["is-open"])],64)}const ao=V(lo,[["render",so]]),_o=I({__name:"HomePage",setup(n){return(l,s)=>{const r=t("ion-menu-button"),d=t("ion-buttons");return a(),h(A(In),null,{default:e(()=>[o(A($n),null,{default:e(()=>[o(A(gn),null,{default:e(()=>[o(d,{slot:"start"},{default:e(()=>[o(r)]),_:1}),o(A(vn),null,{default:e(()=>[u("Home")]),_:1})]),_:1})]),_:1}),o(A(Sn),{fullscreen:!0},{default:e(()=>[o(ao),o(no),o(to)]),_:1})]),_:1})}}});export{_o as default};
